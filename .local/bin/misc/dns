#!/bin/sh

ipv4() {
	echo $(curl -s ipinfo.io/ip)
}

while true
do
    curl -X PUT "https://api.cloudflare.com/client/v4/zones/$ZONE_ID/dns_records/$RECORD_ID" \
         -H "Authorization: Bearer $API_TOKEN" -H "Content-Type: application/json" --data @- << EOF
{"content": "$(ipv4)","name": "ng","proxied": false,"type": "A","comment": "DNS","tags": [],"ttl": 1}
EOF
    sleep 86400
done
